# ğŸ“Œ PROJE: TÃ¼rkiye iÃ§in Ã‡ok KatmanlÄ± Hizmet Platformu (Web + Mobil Uyumlu)

Bu platform, dini/sosyal/psikolojik danÄ±ÅŸmanlÄ±k hizmetlerini veren uzmanlarla kullanÄ±cÄ±larÄ± buluÅŸturan bir sistemdir. 3 farklÄ± kullanÄ±cÄ± statÃ¼sÃ¼ ile Ã§alÄ±ÅŸÄ±r: **Admin**, **Mod (SaÄŸlayÄ±cÄ±)**, **User (KullanÄ±cÄ±)**. Web tabanlÄ± baÅŸlar, ardÄ±ndan Android ve iOS mobil uygulamalarÄ± geliÅŸtirilecektir.

---

## ğŸ’» KULLANILACAK TEKNOLOJÄ°LER

### ğŸ¯ Genel YaklaÅŸÄ±m:
- **Web First**: BaÅŸlangÄ±Ã§ta web tabanlÄ± responsive sistem
- **Mobil Next**: Web ile aynÄ± backend'i kullanan mobil uygulama

---

### ğŸ”§ Backend:  
- **Node.js** (Express.js framework)
- **JWT Authentication**  
- **RESTful API** (TÃ¼m sistem modÃ¼ler ve gÃ¼venli)

### ğŸ—‚ Frontend:  
- **React.js**  
- **TailwindCSS** (Responsive, modern UI)  
- **React Router / Redux** (Sayfa yÃ¶nlendirme + global state)  

### ğŸ“± Mobil Uyum:  
- **React Native** (Android + iOS)  
- Ortak backend kullanÄ±mÄ±
- **Expo** tercih edilecek (hÄ±zlÄ± build)

### ğŸ§  VeritabanÄ±:  
- **PostgreSQL**  
- ORM olarak **Prisma.js**

### ğŸ“ Dosya Sistemi:
TÃ¼m yapÄ± web/mobil uyumluluk dÃ¼ÅŸÃ¼nÃ¼lerek modÃ¼ler ÅŸekilde kurulmalÄ±.

---

## ğŸ‘¥ KULLANICI ROLLERÄ°

| Rol        | AÃ§Ä±klama                                                                 |
|------------|--------------------------------------------------------------------------|
| `admin`    | TÃ¼m kullanÄ±cÄ±larÄ± ve saÄŸlayÄ±cÄ±larÄ± yÃ¶netir, onaylar, kategori oluÅŸturur. AyrÄ±ca iÃ§erik yÃ¶netimi (HakkÄ±mÄ±zda, Ä°letiÅŸim, SSS) yapabilir. |
| `mod`      | Kendi profilini oluÅŸturur, hizmet ekler, rezervasyon alÄ±r               |
| `user`     | Hizmet arar, mesaj atar, randevu alÄ±r ve Ã¶deme yapar                    |

---

## ğŸ” ADMIN CMS YETKÄ°SÄ° 

Admin, aÅŸaÄŸÄ±daki statik sayfalarÄ± admin panelinden dÃ¼zenleyebilmelidir:

| Sayfa             | Alanlar                            |
|-------------------|-------------------------------------|
| HakkÄ±mÄ±zda        | BaÅŸlÄ±k, iÃ§erik, gÃ¶rsel              |
| Ä°letiÅŸim          | Adres, telefon, email, harita linki |
| Ana Sayfa         | Banner baÅŸlÄ±ÄŸÄ±, tanÄ±m metni, CTA    |
| SSS (FAQ)         | Soru â€“ Cevap listesi                |
| Footer            | Adres, sosyal linkler, tel/email    |


## ğŸ” GÃœVENLÄ°K
- JWT tabanlÄ± auth
- Role-check middleware her endpointte aktif olmalÄ±
- SaÄŸlayÄ±cÄ±lar doÄŸrulama sÃ¼recinden geÃ§meden hizmet sunamaz

---

## ğŸ§± DÄ°ZÄ°N YAPISI (Web + Mobil uyumlu)

## âš™ï¸ Ortam DeÄŸiÅŸkenleri
- `DATABASE_URL`: PostgreSQL baÄŸlantÄ± adresi (Ã¶rn: `postgresql://postgres:password@localhost:5432/imam`)
- `JWT_SECRET`: Token imzalama anahtarÄ±
- `PORT`: Backend portu (varsayÄ±lan `5000`)
- `CLIENT_URL`: Web istemci adresi (Ã¶rn: `http://localhost:3000`)
- `PG_BIN_PATH`: PostgreSQL bin klasÃ¶rÃ¼ (Ã¶rn: `C:\\Program Files\\PostgreSQL\\17\\bin`)
- `PG_DUMP_PATH` (opsiyonel): `pg_dump` tam yol
- `PSQL_PATH` (opsiyonel): `psql` tam yol

## ğŸš€ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma (HÄ±zlÄ± BaÅŸlangÄ±Ã§)
- Sunucu
  - `cd f:\\imam\\server`
  - `npm install`
  - `npm start`
- Web Ä°stemci
  - `cd f:\\imam\\web-client`
  - `npm install`
  - `npm start` (port 3000 doluysa `set PORT=3001 && npm start`)
- `.env` Ã¶rneÄŸi
  - `DATABASE_URL="postgresql://postgres:postgres@localhost:5432/imam"`
  - `JWT_SECRET="super-secret"`
  - `PORT=5000`
  - `CLIENT_URL="http://localhost:3000"`
  - `PG_BIN_PATH="C:\\Program Files\\PostgreSQL\\17\\bin"`

## ğŸ§ª DoÄŸrulama Testleri
- Servis DetayÄ± API: `Invoke-WebRequest -Uri "http://localhost:5000/api/services/<SERVICE_ID>" -UseBasicParsing`
- Yedekleme testi: `cd f:\\imam\\server\\scripts; ./test_backup.ps1`
- Admin Backup UI: `http://localhost:3000/admin/backup` (veya `http://localhost:3001/admin/backup`)

## ğŸ Sorun Giderme
- Servis detay boÅŸ/500 hatasÄ±:
  - `server/routes/services.js` iÃ§indeki `include` alanÄ±nÄ± `providerServices` â†’ `providerService` olarak dÃ¼zeltildi.
- `pg_dump` bulunamadÄ±:
  - `.env` iÃ§ine `PG_BIN_PATH` eklendi; gerekirse `PG_DUMP_PATH`/`PSQL_PATH` tanÄ±mlayÄ±n.
- CORS `ERR_FAILED`:
  - `server/server.js` iÃ§inde `cors` yapÄ±landÄ±rmasÄ± `http://localhost:3000` ve `http://localhost:3001` iÃ§in geniÅŸletildi.
- Port Ã§akÄ±ÅŸmasÄ±:
  - Frontendâ€™i `3001` portunda Ã§alÄ±ÅŸtÄ±rÄ±n: `set PORT=3001 && npm start`.

## ğŸ“œ DeÄŸiÅŸiklik GÃ¼nlÃ¼ÄŸÃ¼ (2025-10-29)
- ServiceDetail boÅŸ sayfa hatasÄ± giderildi; backend `include` alanÄ± ÅŸema ile uyumlu hale getirildi.
- CORS izinleri geliÅŸtirme ortamÄ±nda localhost kaynaklarÄ±nÄ± gÃ¼venli biÃ§imde kabul edecek ÅŸekilde gÃ¼ncellendi.
- Yedekleme akÄ±ÅŸÄ± iÃ§in `.env`e `PG_BIN_PATH` eklendi; test scriptiyle doÄŸrulandÄ±.
- Notifications rotasÄ± UUID uyumlu hale getirildi (parseInt kaldÄ±rÄ±ldÄ±).
- ServiceDetail UI zenginleÅŸtirildi: `providerService` bilgileri, saÄŸlayÄ±cÄ± kartÄ± ve "Åimdi Rezervasyon Yap" CTA eklendi.

### âœ… DoÄŸrulama (ServiceDetail)
- `npm start` ile backend (`5000`) ve frontend (`3001`) Ã§alÄ±ÅŸÄ±yor olmalÄ±.
- `/services` â†’ herhangi bir servisin kartÄ±ndaki "Detaylar" tÄ±klanÄ±r.
- `/service/:id` sayfasÄ±nda:
  - BaÅŸlÄ±k, aÃ§Ä±klama, fiyat ve kategori gÃ¶rÃ¼nÃ¼yor.
  - "Bu hizmeti sunan saÄŸlayÄ±cÄ±" blokunda yÃ¶ntem, hedef kitle ve fiyat gÃ¶rÃ¼nÃ¼yor.
  - SaÄŸlayÄ±cÄ± kartÄ±nda profil linki ve "Åimdi Rezervasyon Yap" butonu gÃ¶rÃ¼nÃ¼yor.
- SaÄŸlayÄ±cÄ± linki `/providers/:id` sayfasÄ±na yÃ¶nlendirir.

### ğŸ¨ Profesyonel UI Ä°yileÅŸtirmeleri (ServiceDetail)
- Ãœstte gÃ¶rsel/renk alanÄ± iÃ§in modern hero banner ve soft gradient eklendi.
- Net hiyerarÅŸi: baÅŸlÄ±k, kategori yongasÄ±, fiyat rozeti (TRY formatÄ±).
- Ä°Ã§erik iki sÃ¼tun: yÃ¶ntem/targetAudience/fiyat ve saÄŸlayÄ±cÄ± kartÄ±.
- Birincil CTA: "Åimdi Rezervasyon Yap"; ikincil: "SaÄŸlayÄ±cÄ±ya Mesaj GÃ¶nder".
- Breadcrumb ile sayfa baÄŸlamÄ± ve geri dÃ¶nÃ¼ÅŸ deneyimi iyileÅŸtirildi.

### âœ… DoÄŸrulama (Profesyonel GÃ¶rÃ¼nÃ¼m)
- Frontend: `set PORT=3001 && npm start` ile Ã§alÄ±ÅŸÄ±yor olmalÄ±.
- `/service/:id` sayfasÄ± aÃ§Ä±ldÄ±ÄŸÄ±nda:
  - Hero banner (gÃ¶rsel veya renk) ve Ã¼stte fiyat rozetini gÃ¶rÃ¼rsÃ¼nÃ¼z.
  - Kategori yongasÄ± ve baÅŸlÄ±k okunaklÄ± ve kontrastlÄ±dÄ±r.
  - SaÄŸlayÄ±cÄ± bloÄŸu iki kart halinde dÃ¼zgÃ¼n hizalanÄ±r; mobilde tek sÃ¼tuna dÃ¼ÅŸer.
  - Birincil ve ikincil CTA butonlarÄ± belirgin ve eriÅŸilebilir.
- Fiyatlar `Intl.NumberFormat('tr-TR', 'TRY')` ile biÃ§imlenir.

### ğŸ”§ Teknik Notlar
- Kod: `web-client/src/pages/ServiceDetail.jsx` iÃ§inde `formatPrice()` eklendi, markup yeniden dÃ¼zenlendi.
- Backend veri modeli deÄŸiÅŸmedi; `providerService.provider` altÄ±nda isim/Ã¼nvanÄ± istiyorsanÄ±z ileride `user` iliÅŸkisini include edebiliriz.

## ğŸ“ Yol HaritasÄ±
- ServiceDetail sayfasÄ±na saÄŸlayÄ±cÄ± ve `providerService` bilgilerini gÃ¶rsel bloklarla ekleme.
- Basit rezervasyon akÄ±ÅŸÄ±nÄ± ServiceDetailâ€™den baÅŸlatma.
- Bildirimler iÃ§in okundu/okunmadÄ± filtreleri ve toplu iÅŸlemler.
- API ve UI iÃ§in birim/entegrasyon testleri.
- Ä°steÄŸe baÄŸlÄ± Docker Compose ile hÄ±zlÄ± kurulum.

/project-root
â”‚
â”œâ”€â”€ /server # Backend (Node.js + Express + Prisma)
â”‚ â”œâ”€â”€ /controllers # TÃ¼m API kontrolcÃ¼leri
â”‚ â”‚   â”œâ”€â”€ adminController.js # Admin iÅŸlemleri
â”‚ â”‚   â”œâ”€â”€ authController.js # Kimlik doÄŸrulama iÅŸlemleri
â”‚ â”‚   â”œâ”€â”€ messageController.js # MesajlaÅŸma iÅŸlemleri
â”‚ â”‚   â”œâ”€â”€ modController.js # Mod (SaÄŸlayÄ±cÄ±) iÅŸlemleri
â”‚ â”‚   â”œâ”€â”€ paymentController.js # Ã–deme iÅŸlemleri
â”‚ â”‚   â”œâ”€â”€ staticPageController.js # Statik sayfa iÅŸlemleri
â”‚ â”‚   â””â”€â”€ userController.js # KullanÄ±cÄ± iÅŸlemleri
â”‚ â”‚
â”‚ â”œâ”€â”€ /middleware # Ara yazÄ±lÄ±mlar
â”‚ â”‚   â””â”€â”€ auth.js # Kimlik doÄŸrulama ara yazÄ±lÄ±mÄ±
â”‚ â”‚
â”‚ â”œâ”€â”€ /routes # API rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ admin.js # Admin rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ auth.js # Kimlik doÄŸrulama rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ category.js # Kategori rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ message.js # MesajlaÅŸma rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ mod.js # Mod (SaÄŸlayÄ±cÄ±) rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ notifications.js # Bildirim rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ payment.js # Ã–deme rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ provider.js # SaÄŸlayÄ±cÄ± rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ review.js # Yorum rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ services.js # Hizmet rotalarÄ±
â”‚ â”‚   â”œâ”€â”€ staticPage.js # Statik sayfa rotalarÄ±
â”‚ â”‚   â””â”€â”€ user.js # KullanÄ±cÄ± rotalarÄ±
â”‚ â”‚
â”‚ â”œâ”€â”€ /utils # YardÄ±mcÄ± fonksiyonlar
â”‚ â””â”€â”€ server.js # Ana sunucu dosyasÄ±
â”‚
â”œâ”€â”€ /web-client # Web arayÃ¼zÃ¼ (React.js + TailwindCSS)
â”‚ â”œâ”€â”€ /public # Statik dosyalar
â”‚ â”œâ”€â”€ /src
â”‚ â”‚   â”œâ”€â”€ /components # Yeniden kullanÄ±labilir bileÅŸenler
â”‚ â”‚   â”œâ”€â”€ /context # React context'leri
â”‚ â”‚   â”œâ”€â”€ /hooks # Ã–zel React hook'larÄ±
â”‚ â”‚   â”œâ”€â”€ /pages # Sayfa bileÅŸenleri
â”‚ â”‚   â”œâ”€â”€ App.js # Ana uygulama bileÅŸeni
â”‚ â”‚   â””â”€â”€ index.js # GiriÅŸ noktasÄ±
â”‚ â”œâ”€â”€ package.json # BaÄŸÄ±mlÄ±lÄ±klar ve scriptler
â”‚ â””â”€â”€ tailwind.config.js # TailwindCSS yapÄ±landÄ±rmasÄ±
â”‚
â”œâ”€â”€ /prisma # VeritabanÄ± ÅŸemalarÄ± ve migration'lar
â”‚ â”œâ”€â”€ /migrations # VeritabanÄ± migration'larÄ±
â”‚ â”œâ”€â”€ schema.prisma # VeritabanÄ± ÅŸemasÄ±
â”‚ â””â”€â”€ seed.js # Ã–rnek veri oluÅŸturma scripti
â”‚
â”œâ”€â”€ /docs # Proje dÃ¶kÃ¼manlarÄ±
â”‚ â”œâ”€â”€ admin-flow.md # Admin akÄ±ÅŸ dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ api-endpoints.md # API endpoint'leri dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ db-schema.md # VeritabanÄ± ÅŸema dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ deployment.md # DaÄŸÄ±tÄ±m dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ mobile-flow.md # Mobil akÄ±ÅŸ dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ mod-flow.md # Mod akÄ±ÅŸ dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ mod-verification.md # Mod doÄŸrulama dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ notification.md # Bildirim sistemi dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ payment.md # Ã–deme sistemi dokÃ¼mantasyonu
â”‚ â”œâ”€â”€ test-strategy.md # Test stratejisi dokÃ¼mantasyonu
â”‚ â””â”€â”€ user-flow.md # KullanÄ±cÄ± akÄ±ÅŸ dokÃ¼mantasyonu
â”‚
â”œâ”€â”€ /uploads # YÃ¼klenen dosyalar
â”œâ”€â”€ /generated # Otomatik oluÅŸturulan dosyalar
â”œâ”€â”€ package.json # Ana proje baÄŸÄ±mlÄ±lÄ±klarÄ± ve scriptleri
â””â”€â”€ .env # Ortam deÄŸiÅŸkenleri


## ğŸ§  VERÄ°TABANI ÅEMASI

Projede PostgreSQL veritabanÄ± ve Prisma ORM kullanÄ±lmaktadÄ±r. Ana veri modelleri:

### ğŸ‘¤ User (KullanÄ±cÄ±)
- TÃ¼m kullanÄ±cÄ± tÃ¼rleri iÃ§in temel model (admin, mod, user)
- Kimlik doÄŸrulama ve profil bilgileri
- Rol tabanlÄ± yetkilendirme

### ğŸ‘¨â€ğŸ’¼ Provider (SaÄŸlayÄ±cÄ±)
- Hizmet saÄŸlayÄ±cÄ±lar iÃ§in detaylÄ± profil
- UzmanlÄ±k alanlarÄ±, fiyatlandÄ±rma, konum bilgileri
- DoÄŸrulama durumu ve hizmet yÄ±lÄ±

### ğŸ›ï¸ Service (Hizmet)
- Standart hizmet kategorileri
- Fiyat, aÃ§Ä±klama ve gÃ¶rsel bilgileri
- Kategori iliÅŸkisi

### ğŸ“‹ ProviderService (SaÄŸlayÄ±cÄ± Hizmeti)
- SaÄŸlayÄ±cÄ±larÄ±n Ã¶zelleÅŸtirilmiÅŸ hizmetleri
- Ã–zel fiyatlandÄ±rma ve aÃ§Ä±klamalar
- Hedef kitle ve yÃ¶ntem bilgileri

### ğŸ“… Booking (Rezervasyon)
- KullanÄ±cÄ± ve saÄŸlayÄ±cÄ± arasÄ±ndaki randevular
- Tarih, durum ve Ã¶deme bilgileri
- Hizmet referansÄ±

### ğŸ’¬ Message (Mesaj)
- KullanÄ±cÄ±lar arasÄ± mesajlaÅŸma
- GÃ¶nderen ve alÄ±cÄ± bilgileri
- Ä°Ã§erik ve zaman damgasÄ±

### ğŸ’° Payment (Ã–deme)
- Rezervasyonlara baÄŸlÄ± Ã¶deme kayÄ±tlarÄ±
- Tutar ve durum bilgileri
- SaÄŸlayÄ±cÄ± referansÄ±

### ğŸ“ Review (Yorum)
- KullanÄ±cÄ± deÄŸerlendirmeleri
- Puan ve yorum iÃ§eriÄŸi
- Onay durumu

### ğŸ”” Notification (Bildirim)
- Sistem bildirimleri
- Okunma durumu
- KullanÄ±cÄ± veya saÄŸlayÄ±cÄ± hedefi

### âš™ï¸ SiteSettings (Site AyarlarÄ±)
- SEO ayarlarÄ±
- Logo ve favicon URL'leri
- Site baÅŸlÄ±ÄŸÄ± ve footer metni

## ğŸ“± SAYFA VE Ä°ÅLEVLERÄ°

### ğŸ  KullanÄ±cÄ± SayfalarÄ±
- **Ana Sayfa**: PopÃ¼ler hizmetler ve saÄŸlayÄ±cÄ±lar, mÃ¼ÅŸteri yorumlarÄ±
- **Hizmetler**: TÃ¼m hizmetleri kategorilere gÃ¶re filtreleme ve gÃ¶rÃ¼ntÃ¼leme
- **SaÄŸlayÄ±cÄ±lar**: TÃ¼m saÄŸlayÄ±cÄ±larÄ± filtreleme ve gÃ¶rÃ¼ntÃ¼leme
- **SaÄŸlayÄ±cÄ± Detay**: SaÄŸlayÄ±cÄ± profili, hizmetleri, yorumlarÄ± ve rezervasyon
- **Hizmet Detay**: Hizmet bilgileri, fiyat ve rezervasyon
- **KullanÄ±cÄ± Profili**: KiÅŸisel bilgiler, rezervasyonlar ve yorumlar
- **Mesajlar**: SaÄŸlayÄ±cÄ±larla mesajlaÅŸma
- **Rezervasyonlar**: Randevu geÃ§miÅŸi ve durumlarÄ±

### ğŸ‘¨â€ğŸ’¼ SaÄŸlayÄ±cÄ± SayfalarÄ±
- **SaÄŸlayÄ±cÄ± Paneli**: Profil yÃ¶netimi, hizmet ekleme/dÃ¼zenleme
- **Rezervasyon YÃ¶netimi**: Gelen randevularÄ± onaylama/reddetme
- **Mesaj Kutusu**: KullanÄ±cÄ±larla iletiÅŸim
- **Yorumlar**: AlÄ±nan yorumlarÄ± gÃ¶rÃ¼ntÃ¼leme
- **Ã–demeler**: Ã–deme geÃ§miÅŸi ve bakiye

### ğŸ‘‘ Admin SayfalarÄ±
- **Dashboard**: Genel istatistikler ve Ã¶zet bilgiler
- **KullanÄ±cÄ± YÃ¶netimi**: TÃ¼m kullanÄ±cÄ±larÄ± listeleme ve dÃ¼zenleme
- **SaÄŸlayÄ±cÄ± YÃ¶netimi**: SaÄŸlayÄ±cÄ± onaylama ve dÃ¼zenleme
- **Kategori YÃ¶netimi**: Hizmet kategorilerini ekleme/dÃ¼zenleme
- **Yorum YÃ¶netimi**: YorumlarÄ± onaylama/reddetme
- **Statik Sayfa YÃ¶netimi**: HakkÄ±mÄ±zda, Ä°letiÅŸim gibi sayfalarÄ± dÃ¼zenleme
## ğŸš§ EKSÄ°KLER VE YAPILACAKLAR

### ğŸ”„ TamamlanmasÄ± Gereken Ã–zellikler
- **Mobil Uygulama**: React Native ile mobil uygulama henÃ¼z geliÅŸtirilmemiÅŸ
- **Ã–deme Entegrasyonu**: Ã–deme sistemi altyapÄ±sÄ± hazÄ±r ancak gerÃ§ek Ã¶deme saÄŸlayÄ±cÄ±sÄ± entegrasyonu eksik
- **Bildirim Sistemi**: Email ve push notification entegrasyonu tamamlanmalÄ±
- **SaÄŸlayÄ±cÄ± DoÄŸrulama**: SaÄŸlayÄ±cÄ± doÄŸrulama sÃ¼reci iÃ§in admin panelinde detaylÄ± onay akÄ±ÅŸÄ±
- **Rezervasyon Takvimi**: SaÄŸlayÄ±cÄ±lar iÃ§in gÃ¶rsel takvim arayÃ¼zÃ¼

### ğŸ› ï¸ Teknik Ä°yileÅŸtirmeler
- **Nodemon Kurulumu**: Backend geliÅŸtirme iÃ§in hot-reload Ã¶zelliÄŸi eklenmeli
- **Test KapsamÄ±**: Birim ve entegrasyon testleri yazÄ±lmalÄ±
- **Hata YÃ¶netimi**: Global hata yakalama ve loglama sistemi geliÅŸtirilmeli
- **Performans Optimizasyonu**: Frontend iÃ§in lazy loading ve code splitting
- **GÃ¼venlik TaramasÄ±**: GÃ¼venlik aÃ§Ä±klarÄ± iÃ§in kod taramasÄ± yapÄ±lmalÄ±

### ğŸ“‹ Kurulum ve Ã‡alÄ±ÅŸtÄ±rma TalimatlarÄ±
1. Projeyi klonlayÄ±n: `git clone [repo-url]`
2. BaÄŸÄ±mlÄ±lÄ±klarÄ± yÃ¼kleyin: `npm install`
3. PostgreSQL veritabanÄ±nÄ± kurun ve `.env` dosyasÄ±ndaki baÄŸlantÄ± bilgilerini gÃ¼ncelleyin
4. VeritabanÄ± ÅŸemasÄ±nÄ± oluÅŸturun: `npx prisma migrate dev`
5. Ã–rnek verileri yÃ¼kleyin: `npm run seed`
6. Backend sunucusunu baÅŸlatÄ±n: `npm start`
7. Frontend uygulamasÄ±nÄ± baÅŸlatÄ±n: `cd web-client && npm start`
- SaÄŸlayÄ±cÄ± (mod) akÄ±ÅŸ adÄ±mlarÄ± ve detaylarÄ± docs/mod-flow.md dosyasÄ±na eklendi
- Admin akÄ±ÅŸ adÄ±mlarÄ± ve detaylarÄ± docs/admin-flow.md dosyasÄ±na eklendi
- VeritabanÄ± ÅŸemasÄ± ve Ã¶rnek veri modelleri docs/db-schema.md dosyasÄ±na eklendi
- SaÄŸlayÄ±cÄ± doÄŸrulama sÃ¼reci ve akÄ±ÅŸ diyagramÄ± docs/mod-verification.md dosyasÄ±na eklendi
- Bildirim sistemi teknik dokÃ¼mantasyonu docs/notification.md dosyasÄ±na eklendi
- Ã–deme entegrasyonu teknik dokÃ¼mantasyonu docs/payment.md dosyasÄ±na eklendi
- Test stratejisi ve Ã¶rnek senaryolar docs/test-strategy.md dosyasÄ±na eklendi
- Deployment ve CI/CD dokÃ¼mantasyonu docs/deployment.md dosyasÄ±na eklendi
- Mobil uygulama akÄ±ÅŸlarÄ± ve gereksinimleri docs/mobile-flow.md dosyasÄ±na eklendi
- Backend/server klasÃ¶r yapÄ±sÄ± ve temel dosyalar oluÅŸturuldu
- Prisma veri modelleri eklendi, migration tamamlandÄ± ve veritabanÄ± hazÄ±rlandÄ±
- Backend ana fonksiyonlarÄ±nÄ±n tamamÄ± (auth, kullanÄ±cÄ±, saÄŸlayÄ±cÄ±, admin, hizmet, randevu, mesaj, Ã¶deme) tamamlandÄ±
- Backend API dokÃ¼mantasyonu ve Ã¶rnek istek/cevaplar tamamlandÄ± (docs/api-endpoints.md)
- Frontend (web-client) klasÃ¶rÃ¼, React ve Tailwind kurulumu, temel klasÃ¶r yapÄ±sÄ± oluÅŸturuldu
- Frontend ana sayfa, login, register, navbar, responsive ve modern tasarÄ±m tamamlandÄ±
- Frontend ana sayfa ve kartlar ÅŸu an Ã¶rnek verilerle baÅŸlatÄ±ldÄ±, ileride canlÄ± veriye entegre edilecek
- HakkÄ±mÄ±zda, Hizmetler, Ä°letiÅŸim gibi temel sayfalar oluÅŸturuldu ve Navbar menÃ¼sÃ¼ne eklendi
- Navbar menÃ¼sÃ¼ modern ve eksiksiz ÅŸekilde gÃ¼ncellendi
- Frontend ana sayfa kartlarÄ± (servisler ve saÄŸlayÄ±cÄ±lar) API'den canlÄ± veri Ã§ekecek ÅŸekilde gÃ¼ncellendi
- useFetch custom hook'u ile veri Ã§ekme iÅŸlemleri modÃ¼ler hale getirildi
- SaÄŸlayÄ±cÄ± detay sayfasÄ± (ProviderDetail) eklendi ve canlÄ± veriyle entegre edildi
- SaÄŸlayÄ±cÄ± kartlarÄ± ve detay sayfasÄ± API'den gelen canlÄ± veriye uygun ÅŸekilde gÃ¼ncellendi, eksik alanlar iÃ§in varsayÄ±lan deÄŸerler eklendi
- MÃ¼ÅŸteri yorumlarÄ± bÃ¶lÃ¼mÃ¼ de API'den canlÄ± veriyle entegre edildi
- PopÃ¼ler servisler (Service) gÃ¶rsel ve renk desteÄŸiyle canlÄ± veriyle eksiksiz gÃ¶sterilecek ÅŸekilde tamamlandÄ±
- Mobil uyum ve responsive tasarÄ±m iyileÅŸtirmeleri tamamlandÄ± (navbar, ana sayfa, kartlar)
- Modern mobil ve masaÃ¼stÃ¼ UI iyileÅŸtirmeleri (hamburger menÃ¼, overlay, kartlar, butonlar, animasyonlar) tamamlandÄ±
- Hizmet detay sayfasÄ± (ServiceDetail) ve ilgili backend endpointi eklendi
- Hizmetler sayfasÄ±na kategoriye gÃ¶re filtreleme Ã¶zelliÄŸi eklendi
- KullanÄ±cÄ± paneli (profil ve randevu yÃ¶netimi) eklendi
- Admin paneli: Yorum yÃ¶netimi (canlÄ± veriyle onaylama) eklendi (web-client/src/pages/AdminReviews.jsx)
- Admin paneli: Kategori (hizmet baÅŸlÄ±ÄŸÄ±) yÃ¶netimi sadeleÅŸtirildi (web-client/src/pages/AdminCategories.jsx)
- SaÄŸlayÄ±cÄ± paneli: Kategori seÃ§ip kendi hizmet detayÄ±nÄ± ekleme (web-client/src/pages/ProviderPanel.jsx)
- SaÄŸlayÄ±cÄ±ya Ã¶zel hizmetler iÃ§in ProviderService modeli eklendi (prisma/schema.prisma)
- SaÄŸlayÄ±cÄ±ya Ã¶zel hizmet ekleme ve listeleme endpointleri eklendi (server/routes/provider.js)
- Hizmetler (Services.jsx) sayfasÄ±nda state Ã§akÄ±ÅŸma hatasÄ± giderildi, filtreleme ve kartlar canlÄ± veriyle eksiksiz Ã§alÄ±ÅŸÄ±yor, test edildi
- SaÄŸlayÄ±cÄ± kartlarÄ± ve detay sayfasÄ± (ProviderDetail) canlÄ± veriyle, fiyat, yÃ¶ntem, hedef kitle ve gÃ¶rsel dahil eksiksiz ve ayrÄ±ntÄ±lÄ± gÃ¶steriliyor.
- SaÄŸlayÄ±cÄ± detayÄ±nda her hizmet iÃ§in "Åimdi Rezervasyon Yap" butonu eklendi (ÅŸimdilik alert ile Ã§alÄ±ÅŸÄ±yor).
- KullanÄ±cÄ± panelinde randevu geÃ§miÅŸi iÃ§in tarih, durum ve hizmet adÄ±na gÃ¶re filtreleme Ã¶zelliÄŸi eklendi.
- SaÄŸlayÄ±cÄ± panelinde randevu geÃ§miÅŸi iÃ§in tarih, durum ve hizmet adÄ±na gÃ¶re filtreleme Ã¶zelliÄŸi eklendi.
- Bildirim ikonunda ve listesinde okundu/okunmadÄ± gÃ¶rseli ve UX iyileÅŸtirmesi eklendi.
- Bildirim ikonunda okunmamÄ±ÅŸ bildirim varsa animasyonlu nokta ve listede belirginlik Ã§alÄ±ÅŸÄ±yor mu?
- Admin panelinde yorum yÃ¶netimi ekranÄ±na filtreleme ve arama Ã¶zelliÄŸi eklendi.
- Admin panelinde yorum yÃ¶netimi ekranÄ±nda filtreleme ve arama Ã§alÄ±ÅŸÄ±yor mu?
- SaÄŸlayÄ±cÄ±ya/hizmete Ã¶zel canlÄ± yorumlar iÃ§in dinamik endpoint (SQL) eklendi: /api/reviews?providerId=...&serviceId=...
- SaÄŸlayÄ±cÄ±/hizmet detayÄ±nda canlÄ± yorumlar ve puanlar doÄŸru geliyor mu?
- Ana sayfa mÃ¼ÅŸteri yorumlarÄ± bÃ¶lÃ¼mÃ¼ artÄ±k canlÄ± SQL verisiyle, puan ve hizmet baÅŸlÄ±ÄŸÄ±yla gÃ¶steriliyor.
- KullanÄ±cÄ± profilinde 'YorumlarÄ±m' sekmesi ve filtreleme eklendi.
- KullanÄ±cÄ± profilinde 'YorumlarÄ±m' sekmesi ve filtreleme Ã§alÄ±ÅŸÄ±yor mu?
- SaÄŸlayÄ±cÄ± detayÄ±nda yorumlar iÃ§in filtre ve sÄ±ralama (puan, tarih, anahtar kelime) eklendi.
- SaÄŸlayÄ±cÄ± detayÄ±nda yorumlar iÃ§in filtre ve sÄ±ralama (puan, tarih, anahtar kelime) Ã§alÄ±ÅŸÄ±yor mu?
- CanlÄ± puanlama ve yorum ekleme (kullanÄ±cÄ±dan, admin onayÄ±na dÃ¼ÅŸen) akÄ±ÅŸÄ± eklendi.
- KullanÄ±cÄ± canlÄ± olarak puanlama ve yorum ekleyebiliyor mu? Yorum admin onayÄ±na dÃ¼ÅŸÃ¼yor mu?
- Yorum/Puan verme sadece onaylÄ±/tamamlanmÄ±ÅŸ rezervasyonu olan kullanÄ±cÄ±ya aÃ§Ä±ldÄ±. ManipÃ¼lasyon engellendi.
- Yorum/Puan verme sadece onaylÄ±/tamamlanmÄ±ÅŸ rezervasyonu olan kullanÄ±cÄ±ya aÃ§Ä±k mÄ±? DiÄŸerleri yorum yapamÄ±yor mu?

Herhangi bir hata veya eksik veri gÃ¶rÃ¼rsen bana bildir!

---

## ğŸ”’ GÃ¼venlik ve CORS PolitikasÄ±
- JWT Secret: `.env` iÃ§inde gÃ¼Ã§lÃ¼ ve uzun bir `JWT_SECRET` kullanÄ±n; Ã¼retimde sÄ±rlarÄ± paylaÅŸmayÄ±n.
- CORS: GeliÅŸtirmede `http://localhost:3000` ve `http://localhost:3001` aÃ§Ä±k; Ã¼retimde sadece domainleriniz.
- Token Saklama: TarayÄ±cÄ±da localStorage yerine prod ortamÄ±nda HTTP-only cookie Ã¶nerilir.
- Rate Limit / Bruteforce: Ãœretimde IP tabanlÄ± rate limit ve login throttling ekleyin.
- Yedek DosyalarÄ±: `backups/` klasÃ¶rÃ¼nÃ¼ repo dÄ±ÅŸÄ±nda tutun ve eriÅŸim kontrolÃ¼ uygulayÄ±n.
- Ã‡evresel DeÄŸiÅŸkenler: `.env` dosyasÄ±nÄ± versiyon kontrolÃ¼ne dahil etmeyin; `.env.example` kullanÄ±n.

### CORS KonfigÃ¼rasyon Notu
- Backendâ€™de `cors` yapÄ±landÄ±rmasÄ± `server/server.js` iÃ§inde tanÄ±mlÄ±dÄ±r. GeliÅŸtirmede localhost kaynaklarÄ± kabul edilir.
- Prodâ€™da `origin` alanÄ±nÄ± sadece izinli domainlerle sÄ±nÄ±rlayÄ±n.

## ğŸ’¾ Yedekleme ve Geri YÃ¼kleme

### Yedekleme (pg_dump)
- Admin paneli Ã¼zerinden veya komutla alÄ±nÄ±r; varsayÄ±lan klasÃ¶r: `backups/`.
- Windows iÃ§in `.env` Ã¶rneÄŸi:
  - `PG_BIN_PATH="C:\\Program Files\\PostgreSQL\\17\\bin"`
  - veya spesifik: `PG_DUMP_PATH` ve `PSQL_PATH`
- Komutlar:
  - Backend API: `GET /api/admin/backup` (admin yetkisi)
  - Script: `server/scripts/test_backup.ps1`

### Geri YÃ¼kleme (psql)
- TÃ¼m kullanÄ±cÄ±lar iÃ§in basit SQL dosyasÄ±:
  - `psql -U <user> -h <host> -d <dbname> -f backups/<dosya>.sql`
- Windows/PowerShell Ã¶rneÄŸi:
  - `$env:PG_BIN_PATH="C:\\Program Files\\PostgreSQL\\17\\bin"`
  - `& "$env:PG_BIN_PATH\\psql.exe" -U postgres -h localhost -d imam -f backups\backup_YYYY-MM-DD.sql`
- Notlar:
  - Ãœretimde geri yÃ¼kleme Ã¶ncesi bakÄ±m modu/servis durdurma Ã¶nerilir.
  - BÃ¼yÃ¼k dosyalarda `psql` iÃ§in `-v ON_ERROR_STOP=1` kullanÄ±n.

## ğŸš€ DaÄŸÄ±tÄ±m ve Docker Compose Ã–nerileri

### Ãœretim OrtamÄ± Kontrol Listesi
- Ortam: `NODE_ENV=production` ve saÄŸlam `.env` sÄ±rlarÄ± (JWT, DB baÄŸlantÄ±sÄ±).
- CORS: Ãœretimde sadece izinli domain(ler) iÃ§in `origin`.
- GÃ¼nlÃ¼kleme: Dosya + konsol; kritik hatalar iÃ§in alarm (Sentry/ELK Ã¶neri).
- SaÄŸlÄ±k KontrolÃ¼: `GET /health` gibi basit bir endpoint ile canlÄ±lÄ±k kontrolÃ¼.
- Ters Proxy: Nginx/Traefik ile TLS (Letâ€™s Encrypt) ve gzip/HTTP2 aktif.

### Backend (server) Prod Ã–rnek
- VarsayÄ±lan port: `5000`
- Ã–rnek `.env`:
  - `PORT=5000`
  - `DATABASE_URL=postgres://<user>:<pass>@<host>:5432/imam`
  - `JWT_SECRET=<uzun_ve_guclu_deger>`
  - `CORS_ORIGIN=https://example.com`

### Frontend (web-client) Prod Ã–rnek
- Derleme: `npm run build` ve statik dosyalarÄ± Nginx ile servis edin.
- API tabanÄ±: kodda sabit `http://localhost:5000` kullanÄ±mÄ± var; Ã¼retimde ters proxy ile `/api` yÃ¶nlendirmesi Ã¶nerilir.
- Ã‡evresel deÄŸiÅŸken: ileride `REACT_APP_API_URL` veya `VITE_API_URL` ile yapÄ±landÄ±rma Ã¶nerilir.

### Ã–rnek Docker Compose (Konsept)
- AÅŸaÄŸÄ±daki Ã¶rnek, `server` ve `web-client` dizinlerinde uygun Dockerfile bulunduÄŸunu varsayar.

```yaml
version: "3.9"
services:
  db:
    image: postgres:15
    environment:
      POSTGRES_USER: imam
      POSTGRES_PASSWORD: changeme
      POSTGRES_DB: imam
    volumes:
      - db-data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  server:
    build: ./server
    environment:
      DATABASE_URL: postgres://imam:changeme@db:5432/imam
      JWT_SECRET: supersecret
      CORS_ORIGIN: https://example.com
      NODE_ENV: production
    depends_on:
      - db
    ports:
      - "5000:5000"

  web:
    build: ./web-client
    depends_on:
      - server
    ports:
      - "3000:80"  # Nginx ile statik build servis edildiÄŸini varsayar

volumes:
  db-data:
```

### Ã‡alÄ±ÅŸtÄ±rma
- Komut: `docker compose up -d --build`
- Loglar: `docker compose logs -f server` ve `docker compose logs -f web`
- SaÄŸlÄ±k kontrolÃ¼: `curl http://localhost:5000/health`

### Ters Proxy Ã–nerisi (Nginx)
- `/api` isteklerini `server:5000`â€™a yÃ¶nlendirip, statik dosyalarÄ± `web` servisinden verin.
- HTTPâ†’HTTPS yÃ¶nlendirmesi, gzip ve cache headerâ€™larÄ± aktif edin.

## ğŸ“‹ Durum Takibi
- TamamlandÄ±: Sistem Gereksinimleri ve SÃ¼rÃ¼m UyumlarÄ±
- TamamlandÄ±: GÃ¼venlik ve CORS PolitikasÄ±
- TamamlandÄ±: Yedekleme ve Geri YÃ¼kleme
- TamamlandÄ±: DaÄŸÄ±tÄ±m ve Docker Compose Ã–nerileri
- TamamlandÄ±: Frontend API URL yapÄ±landÄ±rmasÄ± (REACT_APP_API_URL) ve merkezÃ® axios istemcisi
- TamamlandÄ±: ServiceDetail ve Services refaktÃ¶rÃ¼ (merkezÃ® API istemcisi)
- TamamlandÄ±: Navbar ve Notifications refaktÃ¶rÃ¼ (merkezÃ® API istemcisi)
- TamamlandÄ±: AdminLogs ve Login refaktÃ¶rÃ¼ (merkezÃ® API istemcisi)
- TamamlandÄ±: AdminBackup refaktÃ¶rÃ¼ (merkezÃ® API istemcisi)
- TamamlandÄ±: READMEâ€™ye Logging/Ä°zleme, Test Stratejisi, API SÃ¶zleÅŸmesi ve CI/CD bÃ¶lÃ¼mleri
- Devam Ediyor: Logging/Ä°zleme pratiklerinin prod entegrasyonu (Sentry/ELK)
- PlanlandÄ±: Kalan sayfalarda merkezÃ® API istemcisine geÃ§iÅŸ (varsa)
- PlanlandÄ±: Test kapsamÄ± artÄ±rÄ±mÄ± ve otomasyon
- PlanlandÄ±: OpenAPI sÃ¶zleÅŸmesi ve otomatik doÄŸrulama

## ğŸªµ Logging ve Ä°zleme (Ã–neriler)
- Log Seviyeleri: `error`, `warning`, `info`, `debug` (server tarafÄ±nda ayÄ±rÄ±n).
- Toplama: ELK Stack (Elasticsearch, Logstash, Kibana) veya OpenSearch.
- Hata Ä°zleme: Sentry ile hata raporlama ve performans izleme.
- YapÄ±landÄ±rma: Ãœretimde JSON log formatÄ±, request-id ve kullanÄ±cÄ±-id ekleyin.
- AltyapÄ±: Nginx access loglarÄ± ve backend uygulama loglarÄ±nÄ± merkezi sistemde toplayÄ±n.

## ğŸ§ª Test Stratejisi Ã–zeti
- Birim Test: Controller ve yardÄ±mcÄ± fonksiyonlar iÃ§in.
- Entegrasyon Testi: Auth ve rezervasyon akÄ±ÅŸlarÄ±.
- UI Testi: Kritik bileÅŸenler iÃ§in React Testing Library.
- Belge: AyrÄ±ntÄ±lar iÃ§in `docs/test-strategy.md`.

## ğŸ“œ API SÃ¶zleÅŸmesi Ã–zeti
- Ã‡ekirdek: `Auth`, `User`, `Provider`, `Service`, `Booking`, `Notification`, `Admin`.
- Ã–rnekler: `GET /api/services`, `GET /api/services/:id`, `POST /api/auth/login`.
- Belge: AyrÄ±ntÄ±lar iÃ§in `docs/api-endpoints.md`.
- Gelecek: OpenAPI ÅŸemasÄ± eklenip CIâ€™de sÃ¶zleÅŸme doÄŸrulamasÄ±.

## âš™ï¸ CI/CD (GitHub Actions)
- Yol: `.github/workflows/ci.yml`
- Tetikleyiciler: `push`, `pull_request` (main/master)
- AdÄ±mlar:
  - Node 20 kurulumu ve npm cache
  - `server/` iÃ§in `npm ci` ve `npm test --if-present`
  - `web-client/` iÃ§in `npm ci`, `npm run build --if-present`, `npm run lint --if-present`
- Sonraki adÄ±m: Deploy job (Docker build ve push, Ã¼retim sunucuya rollout)

